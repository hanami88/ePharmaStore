<main class="main">
  <div class="header headeradd">
    <h2 class="ql">商品情報編集</h2>
  </div>
  <form
    class="form"
    method="POST"
    action="/admin/{{good._id}}/update"
    enctype="multipart/form-data"
  >
    <div class="form-row">
      <input
        type="text"
        class="btn-edit"
        placeholder="商品名"
        name="tensp"
        value="{{good.tensp}}"
      />
      <input type="hidden" name="oldImage" value="{{good.hinhanh}}" />
      <input
        type="number"
        class="btn-edit"
        placeholder="在庫数"
        name="soluong"
        value="{{good.soluong}}"
      />
      <input
        type="number"
        name="giamgia"
        class="btn-edit"
        placeholder="割引率 (%)"
        value="{{good.giamgia}}"
      />
      <div class="container-banchay">
        <input type="checkbox" name="banchay" id="banchay" {{#if good.banchay}}checked{{/if}} />
        <label for="banchay" class="banchay">売れ筋商品</label>
      </div>
    </div>
    <div class="form-row">
      <select name="danhmuc">
        <option value="">-- カテゴリを選択 --</option>
        <option value="Kho Hàng" {{#if (equal good.danhmuc "Kho Hàng")}}selected{{/if}}>在庫処分</option>
        <option value="Săn Deal" {{#if (equal good.danhmuc "Săn Deal")}}selected{{/if}}>タイムセール</option>
        <option value="Ngàn Deal Hot Tặng Nàng" {{#if ( equal good.danhmuc "Ngàn Deal Hot Tặng Nàng")}}selected{{/if}}>レディース・特集</option>
        <option value="Top bán chạy toàn quốc" {{#if (equal good.danhmuc "Top bán chạy toàn quốc")}}selected{{/if}}>全国ベストセラー</option>
        <option value="Thương hiệu Nhật Bản" {{#if (equal good.danhmuc "Thương hiệu Nhật Bản")}}selected{{/if}}>日本ブランド</option>
      </select>
      <select name="nhacungcap">
        <option value="">-- 仕入れ先を選択 --</option>
        <option value="Công ty CP Dược Hậu Giang" {{#if (equal good.nhacungcap "Công ty CP Dược Hậu Giang")}}selected{{/if}}>Công ty CP Dược Hậu Giang</option>
        <option value="Công ty Dược phẩm Traphaco" {{#if (equal good.nhacungcap "Công ty Dược phẩm Traphaco")}}selected{{/if}}>Công ty Dược phẩm Traphaco</option>
        <option value="Công ty Dược phẩm Sanofi" {{#if (equal good.nhacungcap "Công ty Dược phẩm Sanofi")}}selected{{/if}}>Công ty Dược phẩm Sanofi</option>
        <option value="Công ty cổ phần Dược Pymepharco" {{#if (equal good.nhacungcap "Công ty cổ phần Dược Pymepharco")}}selected{{/if}}>Công ty cổ phần Dược Pymepharco</option>
        <option value="Công ty Cổ phần Dược phẩm TV.Pharm">Công ty Cổ phần Dược phẩm TV.Pharm</option>
      </select>
      <input
        type="number"
        class="btn-edit"
        placeholder="通常価格 (円)"
        name="giagoc"
        value="{{good.giagoc}}"
      />
      <select name="donvi">
        <option value="">-- 単位を選択 --</option>
        <option value="Hộp" {{#if (equal good.donvi "Hộp")}}selected{{/if}}>箱</option>
        <option value="Cái" {{#if (equal good.donvi "Cái")}}selected{{/if}}>個</option>
        <option value="Tuýt" {{#if (equal good.donvi "Tuýt")}}selected{{/if}}>チューブ</option>
        <option value="Thùng" {{#if (equal good.donvi "Thùng")}}selected{{/if}}>ケース</option>
        <option value="Chai" {{#if (equal good.donvi "Chai")}}selected{{/if}}>ボトル</option>
      </select>
    </div>
    <div class="form-row">
      <label>商品画像: </label>
      <div class="upload-wrapper">
        <img class="anhhientai" id="preview" src="/img/{{good.hinhanh}}" />
        <i class="fa-solid fa-cloud-arrow-up" ></i>
        <input class="file" type="file" name="hinhanh" id="hinhanh" accept="image/*"/>
      </div>
    </div>
    <div class="form-row">
      <label>商品説明:</label>
      <textarea rows="8" name="mota">{{good.mota}}</textarea>
    </div>
    <button class="btn primary" type="submit">更新する</button>
  </form>
</main>

<script>
  document.getElementById("hinhanh").addEventListener("change", function (event) {
  const file = event.target.files[0];
  const preview = document.getElementById("preview");

  if (file) {
    const reader = new FileReader();

    reader.onload = function (e) {
      preview.src = e.target.result;
      preview.style.display = "block";
    };

    reader.readAsDataURL(file); 
  } else {
    preview.src = "#";
    preview.style.display = "none";
  }
  });
</script>